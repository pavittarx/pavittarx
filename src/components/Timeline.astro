---
interface Props {
  initialFilter?: string;
}

const { initialFilter = "all" } = Astro.props;

const events = [
  {
    year: "2025",
    items: [
      {
        date: "Nov 25, 2025",
        title: "Design choices for building Location Based Services / Part I",
        link: "https://blog.pavittarx.com/design-choices-for-building-location-based-services-part-i",
        description:
          "Location-based services (LBS) have become an inherent part of our daily lives. From shopping orders, booking taxis, and finding nearby stores to...",
        category: "blog",
      },
      {
        date: "Nov 11, 2025",
        title: "Unique IDs... Which is the best?",
        link: "https://blog.pavittarx.com/unique-ids-which-is-the-best",
        description:
          "When thinking of generating unique IDs, the very first approach that comes to mind is using auto-incrementing integer IDs in traditional databases....",
        category: "blog",
      },
      {
        date: "Oct 28, 2025",
        title: "How Consistent Hashing Scales Distributed Systems",
        link: "https://blog.pavittarx.com/how-consistent-hashing-scales-distributed-systems",
        description:
          "Scaling is the process of increasing the systemâ€™s capacity to handle growing amount work. It's about designing your application or infrastructure so...",
        category: "blog",
      },
      {
        date: "Oct 21, 2025",
        title:
          "Deciphering CAP: The Fundamental Trade-off in Distributed Systems",
        link: "https://blog.pavittarx.com/deciphering-cap-the-fundamental-trade-off-in-distributed-systems",
        description:
          "CAP Theorem is measure that can help you assess the tradeoffs when designing distributed systems. The trade-off is between Consistency, Availability...",
        category: "blog",
      },
      {
        date: "Oct 14, 2025",
        title: "Conwys' Game of Life simulation",
        description:
          "Conwys' Game of Life simulation. <a href='https://github.com/pavittarx/game-of-life' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a> | <a href='https://gameoflife.pavittarx.com/' class='text-[#2575FC] hover:underline' target='_blank'>Live</a>",
        category: "project",
      },
      {
        date: "Aug 2025",
        title: "Joined Kuby Ltd. as Senior Software Engineer",
        description:
          "Architected and deployed a highly scalable backend using NestJS, TypeScript, PostgreSQL, and Prisma ORM on AWS. Re-architected a fragmented microservice application into a modular monolithic structure. Led critical data migration from MongoDB/MySQL to PostgreSQL.",
        category: "work",
      },
      {
        date: "Jun 2025",
        title: "Master of Computer Applications (MCA)",
        description:
          "Completed Master's degree in Computer Applications from IGNOU (Indira Gandhi National Open University). (2021 - 2025)",
        category: "education",
      },
      {
        date: "June 2025",
        title: "mechadealer",
        description:
          "A trading platform written in python using uv. <a href='https://github.com/pavittarx/mechadealer' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "Jan 19, 2025",
        title: "Released v4 of editorjs-html",
        description:
          "Released v4 of editorjs-html, a complete rewrite in TypeScript. <a href='https://github.com/pavittarx/editorjs-html' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a> | <a href='https://www.npmjs.com/package/editorjs-html' class='text-[#2575FC] hover:underline' target='_blank'>NPM</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2024",
    items: [
      {
        date: "June 15, 2024",
        title: "collector",
        description:
          "A web scraper that visits and downloads previous year exam papers from ignou website using playwright. <a href='https://github.com/pavittarx/collector' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "Jan 2024",
        title: "metrapy",
        description:
          "All batteries included wrapper library built around MetaTrader5 trading terminal's python lib. <a href='https://github.com/pavittarx/metrapy' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2023",
    items: [
      {
        date: "Nov 2023",
        title: "btxr",
        description:
          "Implementation of a backtesting library from scratch. <a href='https://github.com/pavittarx/btxr' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "Aug 2023",
        title: "Joined Karmasuite Software",
        description:
          "Spearheaded development for Karmasuite's core SaaS platform using NextJS, tRPC, and PostgreSQL. Developed the Fund Management module and implemented robust Authentication/Authorization using Clerk. Optimized API query performance and documented technical specifications.",
        category: "work",
      },
      {
        date: "Aug 2023",
        title: "mongoy",
        description:
          "Wrapper utility library for pymongo. <a href='https://github.com/pavittarx/mongoy' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "Aug 2023",
        title: "retracer",
        description:
          "Python project to backtest financial instruments. <a href='https://github.com/pavittarx/retracer' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "July 2023",
        title: "tscnr",
        description:
          "A tickers screener that polls and screens data from MetaTrader5. <a href='https://github.com/pavittarx/tscnr' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2021",
    items: [
      {
        date: "Dec 2021",
        title: "Joined Kenko Health",
        description:
          "Spearheaded development of kenkohealth.in using Next.js and TypeScript. Led a team of 3 junior developers, enforcing code quality. Engineered a B2B internal management portal and launched the Kenko Quiz V3 journey.",
        category: "work",
      },
      {
        date: "Nov 14, 2021",
        title: "Does your code have debt?",
        link: "https://blog.pavittarx.com/does-your-code-have-debt",
        description:
          "Good code is an asset, while Bad code is a liability. The liability also has a technical name as Tech/Code Debt. Code debt arises when the delivered...",
        category: "blog",
      },
      {
        date: "Oct 6, 2021",
        title: "Using multiple Github accounts with SSH",
        link: "https://blog.pavittarx.com/using-multiple-github-accounts-with-ssh",
        description:
          "When I started using Github, I used Github Desktop for sometime because that felt easy. Down the line, I learnt using git via CLI. And, I haven't...",
        category: "blog",
      },
      {
        date: "Oct 2021",
        title: "Contributed to OpenSourceDevs",
        description:
          "Contributed unit tests to OpenSourceDevs repository. <a href='https://github.com/MightyJoeW/OpenSourceDevs/commit/64d1c05c4a6eceafad8f22c01e4ef1a5b88d5e1b' class='text-[#2575FC] hover:underline' target='_blank'>View Commit</a>",
        category: "project",
      },
      {
        date: "Aug 14, 2021",
        title: "How code execution works in Javascript?",
        link: "https://blog.pavittarx.com/how-code-execution-works-in-javascript",
        description:
          "Javascript is asynchronous, that simply means that it does not wait. Well, it does but not very often. And, unless you ask it to await. Javascript is...",
        category: "blog",
      },
      {
        date: "Aug 14, 2021",
        title: "Why you should avoid using CMS for your projects?",
        link: "https://blog.pavittarx.com/why-you-should-avoid-using-cms-for-your-projects",
        description:
          "I will start with Strapi, and If you do not know it already. Strapi is a headless CMS, written on top of Nodejs. So, you can use it to create APIs,...",
        category: "blog",
      },
      {
        date: "May 2021",
        title: "Joined Applore Technologies",
        description:
          "Mentored junior developers and delivered 4 end-to-end web applications. Implemented real-time data synchronization using Node.js Event API and Socket.io. Engineered JK Sales Smart application using React and AWS EC2.",
        category: "work",
      },
      {
        date: "Apr 25, 2021",
        title:
          "Understanding the Client-Server model of application development",
        link: "https://blog.pavittarx.com/understanding-the-client-server-model-of-application-development",
        description:
          "For someone starting out their web development journey, he must first understand how web apps work. The Client-Server model act as the core of every...",
        category: "blog",
      },
      {
        date: "April 2021",
        title: "Health Profile Calculator",
        description:
          "A health profile calculator based on user weight, classifies as low risk, high risk, malnutrition etc. <a href='https://github.com/pavittarx/health-profile-calculator' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2020",
    items: [
      {
        date: "September 10, 2020",
        title: "JavaScript Algorithms and Data Structures Certification",
        description:
          "Earned the JavaScript Algorithms and Data Structures certification from freeCodeCamp. <a href='https://www.freecodecamp.org/certification/pavittarx/javascript-algorithms-and-data-structures' class='text-[#2575FC] hover:underline' target='_blank'>View Certification</a>",
        category: "certification",
      },
      {
        date: "July 2020",
        title: "Joined The Loot",
        description:
          "Launched and maintained theloot.app educational platform. Engineered a scalable user engagement system using Firebase Cloud Functions and developed an internal dashboard using React.",
        category: "work",
      },
      {
        date: "June 2020",
        title: "Moleculer Snippets",
        description:
          "A VSCode extension to integrate code snippets into VSCode. <a href='https://github.com/pavittarx/moleculer-snippets' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "Apr 7, 2020",
        title: "Released v1 of editorjs-html",
        description:
          "Released v1 of editorjs-html, an open source project. <a href='https://github.com/pavittarx/editorjs-html' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a> | <a href='https://www.npmjs.com/package/editorjs-html' class='text-[#2575FC] hover:underline' target='_blank'>NPM</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2019",
    items: [
      {
        date: "Nov 2019",
        title: "Started at Augment Systems",
        description:
          "Managed Orders Management project using TypeScript, Angular, and Node.js. Built a proprietary Citation Engine and assisted with AWS EC2 cloud infrastructure tasks.",
        category: "work",
      },
      {
        date: "Oct 2019",
        title: "Contributed to Neutralinojs",
        description:
          "Contributed to the open source project Neutralinojs. <a href='https://github.com/neutralinojs/neutralinojs' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
    ],
  },
  {
    year: "2018",
    items: [
      {
        date: "Oct 2018",
        title: "Built Solid Minimal",
        description:
          "Built a profile viewer app for solid data decentralisation project. <a href='https://github.com/pavittarx/solid-minimal/' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
      {
        date: "June 2018",
        title: "Bachelors of Computer Applications (BCA)",
        description:
          "Completed Bachelor's degree in Computer Applications from IGNOU (Indira Gandhi National Open University). (2015 - 2018)",
        category: "education",
      },
      {
        date: "May 2018",
        title: "Built Blue Groceries",
        description:
          "A fullstack ecommerce project written using Express, MySQL, Stripe and EJS Templating engine. <a href='https://github.com/pavittarx/bluegroceries' class='text-[#2575FC] hover:underline' target='_blank'>GitHub</a>",
        category: "project",
      },
    ],
  },
];
---

<style>
  #timeline {
    --theme-primary: #2575fc;
    position: relative;
    overflow: hidden;
  }

  .clip-corner {
    clip-path: polygon(
      10px 0, 100% 0,
      100% calc(100% - 10px), calc(100% - 10px) 100%,
      0 100%, 0 10px
    );
  }

  .clip-corner-sm {
    clip-path: polygon(
      4px 0, 100% 0,
      100% calc(100% - 4px), calc(100% - 4px) 100%,
      0 100%, 0 4px
    );
  }

  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    height: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #0f111a;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #2575fc;
    border-radius: 3px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #4a90e2;
  }

  .filter-btn.active {
    background-color: rgba(37, 117, 252, 0.2);
    border-color: #2575fc;
    color: #2575fc;
    box-shadow: 0 0 15px rgba(37, 117, 252, 0.3);
  }
</style>

<section
  id="timeline"
  class="py-16 bg-[#0a0a0f] min-h-screen flex flex-col"
  data-initial-filter={initialFilter}
>
  <!-- Sci-fi Background -->
  <div class="absolute inset-0 -z-10 h-full w-full overflow-hidden pointer-events-none">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(37,117,252,0.05)_0%,transparent_70%)]"></div>
    <div class="absolute inset-0 bg-[linear-gradient(rgba(37,117,252,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(37,117,252,0.03)_1px,transparent_1px)] bg-[size:50px_50px] [mask-image:linear-gradient(to_bottom,black_40%,transparent_90%)]"></div>
  </div>

  <div class="container mx-auto px-6 z-10 flex-1 flex flex-col">
    <!-- Header -->
    <div class="text-center mb-12">
      <div class="inline-flex items-center justify-center p-3 border border-[#2575FC]/30 bg-[#0f111a]/80 backdrop-blur-sm clip-corner mb-4">
        <svg
          class="w-6 h-6 text-[#2575FC]"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
        <h2 class="ml-3 text-2xl font-bold tracking-wider text-white font-mono uppercase">
          Mission Log
        </h2>
      </div>
      <p class="text-gray-400 max-w-2xl mx-auto font-mono text-sm">
        // CHRONOLOGICAL RECORD OF OPERATIONS AND DEPLOYMENTS
      </p>
    </div>

    <!-- Filters -->
    <div class="flex flex-wrap justify-center gap-4 mb-12">
      {['all', 'work', 'blog', 'education', 'project', 'certification'].map((filter) => (
        <button
          class={`filter-btn px-6 py-2 text-sm font-mono uppercase tracking-wider border border-gray-800 bg-[#0f111a] text-gray-400 hover:text-[#2575FC] hover:border-[#2575FC]/50 transition-all duration-300 clip-corner-sm ${filter === 'all' ? 'active' : ''}`}
          data-filter={filter}
        >
          [{filter}]
        </button>
      ))}
    </div>

    <!-- Horizontal Timeline Container -->
    <div class="relative flex-1 overflow-hidden">
      <!-- Central Line -->
      <div class="absolute top-1/2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[#2575FC]/30 to-transparent -translate-y-1/2 z-0"></div>

      <!-- Scrollable Area -->
      <div class="overflow-x-auto custom-scrollbar pb-12 h-full flex items-center px-12 snap-x snap-mandatory">
        <div class="flex gap-24 items-center min-w-max px-12">
          {
            events.map((group) => (
              <div class="relative flex flex-col items-center gap-8 snap-center group">
                <!-- Year Marker -->
                <div class="relative z-10">
                  <div class="w-16 h-16 flex items-center justify-center bg-[#0f111a] border-2 border-[#2575FC] rounded-full shadow-[0_0_20px_rgba(37,117,252,0.3)] group-hover:scale-110 transition-transform duration-300">
                    <span class="text-[#2575FC] font-bold font-mono">{group.year}</span>
                  </div>
                  <!-- Vertical Line Connector -->
                  <div class="absolute top-16 left-1/2 w-[1px] h-full bg-[#2575FC]/30 -translate-x-1/2"></div>
                </div>

                <!-- Events Grid for this Year -->
                <div class="grid grid-flow-col grid-rows-2 gap-6 mt-4">
                  {group.items.map((item) => (
                    <div
                      class="timeline-item w-80 bg-[#0f111a]/90 border border-gray-800 hover:border-[#2575FC] p-5 clip-corner transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_0_15px_rgba(37,117,252,0.15)] backdrop-blur-sm"
                      data-category={item.category}
                    >
                      <div class="flex justify-between items-start mb-3">
                        <span class={`text-[10px] font-mono uppercase px-2 py-1 border ${
                          item.category === 'work' ? 'border-purple-500/50 text-purple-400' :
                          item.category === 'project' ? 'border-green-500/50 text-green-400' :
                          item.category === 'blog' ? 'border-pink-500/50 text-pink-400' :
                          'border-blue-500/50 text-blue-400'
                        } clip-corner-sm`}>
                          {item.category}
                        </span>
                        {item.date && (
                          <span class="text-xs text-gray-500 font-mono">{item.date}</span>
                        )}
                      </div>

                      <h3 class="text-lg font-bold text-white mb-2 line-clamp-2 group-hover:text-[#2575FC] transition-colors">
                        {item.link ? (
                          <a href={item.link} target="_blank" class="hover:underline decoration-[#2575FC] underline-offset-4">
                            {item.title}
                          </a>
                        ) : (
                          item.title
                        )}
                      </h3>

                      {item.description && (
                        <p class="text-sm text-gray-400 leading-relaxed line-clamp-3" set:html={item.description} />
                      )}
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const buttons = document.querySelectorAll(".filter-btn");
  const items = document.querySelectorAll(".timeline-item");
  const years = document.querySelectorAll("ol > li");
  const timelineSection = document.getElementById("timeline");

  function applyFilter(filter: string) {
    // Update buttons
    buttons.forEach((b) => {
      if ((b as HTMLElement).dataset.filter === filter) {
        b.classList.add("active");
      } else {
        b.classList.remove("active");
      }
    });

    // Filter items
    items.forEach((item) => {
      if (
        filter === "all" ||
        (item as HTMLElement).dataset.category === filter
      ) {
        (item as HTMLElement).style.display = "block";
        (item as HTMLElement).style.opacity = "1";
        (item as HTMLElement).style.transform = "scale(1)";
      } else {
        (item as HTMLElement).style.display = "none";
        (item as HTMLElement).style.opacity = "0";
        (item as HTMLElement).style.transform = "scale(0.95)";
      }
    });
  }

  buttons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const filter = (btn as HTMLElement).dataset.filter;
      if (filter) applyFilter(filter);
    });
  });

  // Apply initial filter
  if (timelineSection && timelineSection.dataset.initialFilter) {
    applyFilter(timelineSection.dataset.initialFilter);
  }
</script>
```
